{% extends "base.html" %}
{% load static %}



{% block title %}Inicio - ChoriFans{% endblock %}


{% block content %}
  <h2>Parrillas destacadas</h2>

 
  {% if parrillas %}
    <div class="parrilla-grid">
      {% for parrilla in parrillas %}
        <div class="parrilla-card">
          
         {% if parrilla.foto_principal %}
          <div class="parrilla-image">
          <img src="{{ parrilla.foto_principal.url }}" alt="Foto de {{ parrilla.nombre }}">
          </div>
        {% endif %}

          <!-- Nombre de la parrilla -->
          <div class="parrilla-title">
            {{ parrilla.nombre }}
          </div>

          <!-- Categor칤a (si existe) -->
          <div class="parrilla-info">
            Categor칤a:
            {% if parrilla.categoria %}
              {{ parrilla.categoria.nombre }}
            {% else %}
              Sin categor칤a
            {% endif %}
          </div>

          <!-- Ubicaci칩n (si existe) -->
          <div class="parrilla-info">
            Ubicaci칩n:
            {% if parrilla.ubicacion %}
              {{ parrilla.ubicacion }}
              {# Si definimos __str__ en Ubicacion, se ve bien, ej: "Buenos Aires - Caballito" #}
            {% else %}
              Sin ubicaci칩n
            {% endif %}
          </div>

         <!-- Puntaje en choripanes -->
<div class="parrilla-rating">

  {% with puntaje=parrilla.promedio_puntaje|default:0 %}
      {% with entero=puntaje|floatformat:"0" %}
          {% with decimal=puntaje|floatformat:"1" %}

              <span class="puntaje-promedio-iconos">

                  {# 游댠 1) Choripanes completos #}
                  {% for i in "12345" %}
                      {% if forloop.counter <= entero|add:"0" %}
                          <span class="chori chori--lleno">游꺐</span>
                      {% else %}
                          {% if forloop.counter == entero|add:"1" and decimal|floatformat:"1"|slice:"-2:" == ".5" %}
                              <span class="chori chori--lleno" style="opacity:0.55;">游꺐</span>
                          {% else %}
                              {# 游댠 3) Chorip치n apagado (gris) #}
                              <span class="chori chori--gris">游꺐</span>
                          {% endif %}
                      {% endif %}
                  {% endfor %}

              </span>

          {% endwith %}
      {% endwith %}
  {% endwith %}

</div>


          <!-- Bot칩n "Ver m치s" (por ahora sin link real) -->
          <a href="{% url 'parrillas:detalle' parrilla.id %}" class="btn-ver">
              Ver m치s
          </a>


        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No hay parrillas cargadas todav칤a. Prob치 agregarlas desde el admin.</p>
  {% endif %}
{% endblock %}

